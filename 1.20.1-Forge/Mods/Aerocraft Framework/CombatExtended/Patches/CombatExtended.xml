<?xml version="1.0" encoding="utf-8"?>
<Patch>
  <!--基础武器-->
  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>MYDE_AF_UniversalWeapon_BaseGun</defName>
    <statBases>
      <RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
      <SightsEfficiency>1</SightsEfficiency>
      <ShotSpread>0.07</ShotSpread>
      <SwayFactor>0.69</SwayFactor>
    </statBases>
    <Properties>
      <recoilAmount>0.91</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_556x45mmNATO_FMJ</defaultProjectile>
      <warmupTime>1.3</warmupTime>
      <range>48</range>
      <ticksBetweenBurstShots>5</ticksBetweenBurstShots>
      <burstShotCount>10</burstShotCount>
      <soundCast>GunShotA</soundCast>
      <soundCastTail>GunTail_Light</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
      <recoilPattern>Mounted</recoilPattern>
    </Properties>
    <AmmoUser>
      <magazineSize>200</magazineSize>
      <reloadTime>7.8</reloadTime>
      <ammoSet>AmmoSet_556x45mmNATO</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiAimMode>AimedShot</aiAimMode>
      <noSnapshot>true</noSnapshot>
      <noSingleShot>true</noSingleShot>
    </FireModes>
  </Operation>
  <!--速射机枪-->
  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>MYDE_AF_UniversalWeapon_MiniGun</defName>
    <statBases>
      <Mass>20.00</Mass>
      <RangedWeapon_Cooldown>0.35</RangedWeapon_Cooldown>
      <SightsEfficiency>1</SightsEfficiency>
      <ShotSpread>0.06</ShotSpread>
      <SwayFactor>3.22</SwayFactor>
      <Bulk>10</Bulk>
      <WorkToMake>52000</WorkToMake>
    </statBases>
    <costList>
      <Steel>110</Steel>
      <ComponentIndustrial>11</ComponentIndustrial>
    </costList>
    <Properties>
      <recoilAmount>0.97</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_762x51mmNATO_FMJ</defaultProjectile>
      <warmupTime>2.1</warmupTime>
      <range>62</range>
      <burstShotCount>50</burstShotCount>
      <ticksBetweenBurstShots>2</ticksBetweenBurstShots>
      <soundCast>Shot_Minigun</soundCast>
      <soundCastTail>GunTail_Medium</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>500</magazineSize>
      <reloadTime>9.2</reloadTime>
      <ammoSet>AmmoSet_762x51mmNATO</ammoSet>
    </AmmoUser>
    <FireModes>
      <aimedBurstShotCount>25</aimedBurstShotCount>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
  </Operation>
  <!--狙击枪-->
  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>MYDE_AF_UniversalWeapon_SniperGun</defName>
    <statBases>
      <Mass>7.30</Mass>
      <RangedWeapon_Cooldown>1.36</RangedWeapon_Cooldown>
      <SightsEfficiency>2.6</SightsEfficiency>
      <ShotSpread>0.05</ShotSpread>
      <SwayFactor>1.35</SwayFactor>
      <Bulk>11.92</Bulk>
      <WorkToMake>30000</WorkToMake>
    </statBases>
    <costList>
      <Steel>60</Steel>
      <ComponentIndustrial>5</ComponentIndustrial>
      <Chemfuel>15</Chemfuel>
    </costList>
    <Properties>
      <recoilAmount>1.50</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_762x51mmNATO_FMJ</defaultProjectile>
      <warmupTime>1.8</warmupTime>
      <range>75</range>
      <soundCast>Shot_SniperRifle</soundCast>
      <soundCastTail>GunTail_Heavy</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>10</magazineSize>
      <reloadTime>4</reloadTime>
      <ammoSet>AmmoSet_762x51mmNATO</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <researchPrerequisite>PrecisionRifling</researchPrerequisite>
    <AllowWithRunAndGun>false</AllowWithRunAndGun>
  </Operation>
  <!--榴弹-->
  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>MYDE_AF_UniversalWeapon_GrenadeGun</defName>
    <statBases>
      <WorkToMake>9000</WorkToMake>
      <SightsEfficiency>1</SightsEfficiency>
      <ShotSpread>0.16</ShotSpread>
      <SwayFactor>1.00</SwayFactor>
      <Bulk>7.31</Bulk>
      <Mass>2.70</Mass>
      <RangedWeapon_Cooldown>0.93</RangedWeapon_Cooldown>
    </statBases>
    <costList>
      <Steel>40</Steel>
      <ComponentIndustrial>1</ComponentIndustrial>
      <WoodLog>10</WoodLog>
    </costList>
    <Properties>
      <recoilAmount>3.28</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_40x46mmGrenade_HE</defaultProjectile>
      <ai_IsBuildingDestroyer>true</ai_IsBuildingDestroyer>
      <warmupTime>1.1</warmupTime>
      <range>44</range>
      <minRange>5</minRange>
      <targetParams>
        <canTargetLocations>true</canTargetLocations>
      </targetParams>
      <soundCast>InfernoCannon_Fire</soundCast>
      <muzzleFlashScale>14</muzzleFlashScale>
      <ignorePartialLoSBlocker>true</ignorePartialLoSBlocker>
    </Properties>
    <AmmoUser>
      <magazineSize>12</magazineSize>
      <AmmoGenPerMagOverride>3</AmmoGenPerMagOverride>
      <reloadTime>2.2</reloadTime>
      <ammoSet>AmmoSet_40x46mmGrenade</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiUseBurstMode>FALSE</aiUseBurstMode>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <researchPrerequisite>PrecisionRifling</researchPrerequisite>
    <AllowWithRunAndGun>false</AllowWithRunAndGun>
  </Operation>
  <!--4旋翼·速射机枪-->
  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>MYDE_AF_RotorCraft_FourPropeller_ExtraWeapon_MachineGun_Weapon</defName>
    <statBases>
      <Mass>20.00</Mass>
      <RangedWeapon_Cooldown>0.35</RangedWeapon_Cooldown>
      <SightsEfficiency>1</SightsEfficiency>
      <ShotSpread>0.06</ShotSpread>
      <SwayFactor>3.22</SwayFactor>
      <Bulk>10</Bulk>
      <WorkToMake>52000</WorkToMake>
    </statBases>
    <costList>
      <Steel>110</Steel>
      <ComponentIndustrial>11</ComponentIndustrial>
    </costList>
    <Properties>
      <recoilAmount>0.97</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_762x51mmNATO_FMJ</defaultProjectile>
      <warmupTime>2.1</warmupTime>
      <range>62</range>
      <burstShotCount>50</burstShotCount>
      <ticksBetweenBurstShots>2</ticksBetweenBurstShots>
      <soundCast>Shot_Minigun</soundCast>
      <soundCastTail>GunTail_Medium</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>600</magazineSize>
      <reloadTime>9.2</reloadTime>
      <ammoSet>AmmoSet_762x51mmNATO</ammoSet>
    </AmmoUser>
    <FireModes>
      <aimedBurstShotCount>25</aimedBurstShotCount>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
  </Operation>
  <!--4旋翼·火箭巢-->
  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>MYDE_AF_RotorCraft_FourPropeller_ExtraWeapon_Rocket_Weapon</defName>
    <statBases>
      <WorkToMake>9000</WorkToMake>
      <SightsEfficiency>1</SightsEfficiency>
      <ShotSpread>0.16</ShotSpread>
      <SwayFactor>1.00</SwayFactor>
      <Bulk>7.31</Bulk>
      <Mass>2.70</Mass>
      <RangedWeapon_Cooldown>0.93</RangedWeapon_Cooldown>
    </statBases>
    <costList>
      <Steel>40</Steel>
      <ComponentIndustrial>1</ComponentIndustrial>
      <WoodLog>10</WoodLog>
    </costList>
    <Properties>
      <recoilAmount>1.73</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_50mmRocket_HE_ForFourPropeller_ExtraWeapon_Rocket_Weapon</defaultProjectile>
      <ai_IsBuildingDestroyer>true</ai_IsBuildingDestroyer>
      <warmupTime>3.6</warmupTime>
      <range>86</range>
      <targetParams>
        <canTargetLocations>true</canTargetLocations>
      </targetParams>
      <soundCast>RocketswarmLauncher_Fire</soundCast>
      <muzzleFlashScale>39</muzzleFlashScale>
      <ignorePartialLoSBlocker>true</ignorePartialLoSBlocker>
      <burstShotCount>4</burstShotCount>
      <ticksBetweenBurstShots>15</ticksBetweenBurstShots>
      <soundCastTail>GunTail_Heavy</soundCastTail>
    </Properties>
    <researchPrerequisite>PrecisionRifling</researchPrerequisite>
    <AllowWithRunAndGun>false</AllowWithRunAndGun>
    <AmmoUser>
      <magazineSize>24</magazineSize>
      <reloadTime>6.5</reloadTime>
      <ammoSet>AmmoSet_50mmRocket_ForFourPropeller_ExtraWeapon_Rocket_Weapon</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiUseBurstMode>FALSE</aiUseBurstMode>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
  </Operation>
  <!--辅助型-->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Combat Extended</li>
    </mods>
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>Defs/ThingDef[defName="MYDE_AF_RotorCraft_AssistiveCraft_Base"]/comps</xpath>
      <value>
        <comps>
          <!--原版燃料-->
          <li Class="CompProperties_Refuelable">
            <!--<fuelLabel>Fuel</fuelLabel>-->
            <!--<fuelGizmoLabel>Fuel</fuelGizmoLabel>-->
            <outOfFuelMessage>Needs Fuel</outOfFuelMessage>
            <fuelFilter>
              <thingDefs>
                <li>Chemfuel</li>
              </thingDefs>
            </fuelFilter>
            <fuelCapacity>300</fuelCapacity>
            <fuelMultiplier>1</fuelMultiplier>
            <initialFuelPercent>0.1</initialFuelPercent>
            <autoRefuelPercent>1</autoRefuelPercent>
            <showFuelGizmo>true</showFuelGizmo>
            <minimumFueledThreshold>1</minimumFueledThreshold>
            <consumeFuelOnlyWhenUsed>true</consumeFuelOnlyWhenUsed>
            <!--<fuelIconPath>UI/Overlays/Barrel</fuelIconPath>-->
          </li>
          <!--本体的渲染+阴影-->
          <li Class="MYDE_AerocraftFramework.CompProperties_Base_Thing">
            <!--是否渲染-->
            <If_Draw_Base>True</If_Draw_Base>
            <!--飞行的大小变化-->
            <Draw_ScaleIncreaseFactor_WhenFlying>0.2</Draw_ScaleIncreaseFactor_WhenFlying>
            <!--本体的图层大小+高度-->
            <Draw_Base_TexturePath>AerocraftFramework/RotorCraft_AssistiveCraft/Base</Draw_Base_TexturePath>
            <Draw_Base_Scale>1.6</Draw_Base_Scale>
            <Draw_Base_ExtraAltitudeLayerNum>0.4</Draw_Base_ExtraAltitudeLayerNum>
            <!--是否制作阴影+阴影最大最下长度+阴影角度-->
            <If_NeedDrawAllShadow>True</If_NeedDrawAllShadow>
            <!--是否制作本体阴影+大小+图层+透明度-->
            <If_DrawShadow_Base>true</If_DrawShadow_Base>
            <Draw_Shadow_Base_Scale>1.2</Draw_Shadow_Base_Scale>
            <Draw_Shadow_Base_HeightFactor>1.2</Draw_Shadow_Base_HeightFactor>
            <Draw_Shadow_Base_ExtraAltitudeLayerNum>-0.5</Draw_Shadow_Base_ExtraAltitudeLayerNum>
            <Draw_Shadow_Base_Transparency>0.5</Draw_Shadow_Base_Transparency>
          </li>
          <!--主武器渲染+阴影-->
          <li Class="MYDE_AerocraftFramework.CompProperties_Base_Weapon">
            <!--枪械-->
            <WeaponDef>MYDE_AF_UniversalWeapon_BaseGun</WeaponDef>
            <!--是否渲染-->
            <If_Draw_Gun>True</If_Draw_Gun>
            <!--枪的图层高度-->
            <Draw_Gun_Scale>1</Draw_Gun_Scale>
            <Draw_Gun_ExtraAltitudeLayerNum>0.3</Draw_Gun_ExtraAltitudeLayerNum>
            <!--是否制作枪械阴影+大小+图层+透明度-->
            <If_DrawShadow_Gun>true</If_DrawShadow_Gun>
            <Draw_Shadow_Gun_Scale>0.75</Draw_Shadow_Gun_Scale>
            <Draw_Shadow_Gun_ExtraAltitudeLayerNum>-0.6</Draw_Shadow_Gun_ExtraAltitudeLayerNum>
            <Draw_Shadow_Gun_Transparency>0.5</Draw_Shadow_Gun_Transparency>
          </li>
          <!--移动方式-->
          <li Class="MYDE_AerocraftFramework.CompProperties_MoveToTargetAndHover">
            <!--碰撞检测的最大移动距离-->
            <Check_CollideMoveRangeMax>5</Check_CollideMoveRangeMax>
            <!--起飞需要的预热时间-->
            <Move_WarmUpTickMax>120</Move_WarmUpTickMax>
            <!--是否需要转向，False则省略飞行器转向过程-->
            <If_NeedTurnWhenMoving>True</If_NeedTurnWhenMoving>
            <!--是否是滑跃起飞-->
            <If_NeedGlidingWhenTakeOff>False</If_NeedGlidingWhenTakeOff>
            <!--最大移动速度+转向时的移动速度-->
            <MoveSpeed_Max>0.1</MoveSpeed_Max>
            <MoveSpeed_Turning>0.05</MoveSpeed_Turning>
            <!--默认盘旋设置 True为开 False为关-->
            <Default_HoverSet>False</Default_HoverSet>
            <!--盘旋的文字+图标-->
            <Hover_Icon_On_Label>Hover：On</Hover_Icon_On_Label>
            <Hover_Icon_Off_Label>Hover：Off</Hover_Icon_Off_Label>
            <Hover_Icon_Description>Whether to turn on or off the hovering of the aerocraft</Hover_Icon_Description>
            <Hover_Icon_On_IconPath>AerocraftFramework/Icon/Hover</Hover_Icon_On_IconPath>
            <Hover_Icon_Off_IconPath>AerocraftFramework/Icon/False</Hover_Icon_Off_IconPath>
            <!--起飞降落的图标切换·文字+图标-->
            <TakeOffAndLanding_Icon_On_Label>Take off</TakeOffAndLanding_Icon_On_Label>
            <TakeOffAndLanding_Icon_Off_Label>Landing</TakeOffAndLanding_Icon_Off_Label>
            <TakeOffAndLanding_Icon_Description>Switching between takeoff and landing, the “Shield”RA-S can take off and land vertically at any time, and can only attack during flight. After takeoff, move it with the right mouse button, right-click on Non-Player faction object to forcibly attack the target, right-click on our faction object to switch to follow mode.</TakeOffAndLanding_Icon_Description>
            <TakeOffAndLanding_Icon_On_IconPath>AerocraftFramework/Icon/Up</TakeOffAndLanding_Icon_On_IconPath>
            <TakeOffAndLanding_Icon_Off_IconPath>AerocraftFramework/Icon/Down</TakeOffAndLanding_Icon_Off_IconPath>
            <!--盘旋的角速度+转向速度-->
            <AngleChangePerTick_Hover>1</AngleChangePerTick_Hover>
            <AngleChangePerTick_Turning>2</AngleChangePerTick_Turning>
            <!--每Tick消耗燃料量 1 = 60燃料/秒 0.015 = 0.9燃料/秒-->
            <FuelConsumePerTick>0.015</FuelConsumePerTick>
          </li>
          <!--装饰物·扇叶-->
          <li Class="MYDE_AerocraftFramework.CompProperties_BaseDraw_DecorationAndShadow">
            <!--装饰物的路径+大小+透明度-->
            <Draw_Decoration_TexturePath>AerocraftFramework/RotorCraft_AssistiveCraft/Propeller</Draw_Decoration_TexturePath>
            <Draw_Decoration_Scale>1.6</Draw_Decoration_Scale>
            <Draw_Decoration_Transparency>1</Draw_Decoration_Transparency>
            <!--本体的图层+额外图层数值调整-->
            <Draw_Decoration_BaseAltitude>WorldClipper</Draw_Decoration_BaseAltitude>
            <Draw_Decoration_ExtraAltitudeLayerNum>0.5</Draw_Decoration_ExtraAltitudeLayerNum>
            <!--偏移中心点的长度跟角度（用来计算位置）-->
            <Draw_Decoration_Range>0</Draw_Decoration_Range>
            <Draw_Decoration_Angle>0</Draw_Decoration_Angle>
            <!--基础旋转方向+转速-->
            <Draw_Decoration_BaseRotate>0</Draw_Decoration_BaseRotate>
            <Draw_Decoration_RotateSpeedPerTick_Max>2</Draw_Decoration_RotateSpeedPerTick_Max>
            <!--是否渲染阴影-->
            <If_DrawShadow>true</If_DrawShadow>
            <Draw_Shadow_TexturePath>AerocraftFramework/RotorCraft_AssistiveCraft/Propeller</Draw_Shadow_TexturePath>
            <Draw_Shadow_ScaleAndRangeFactor>0.75</Draw_Shadow_ScaleAndRangeFactor>
            <Draw_Shadow_Transparency>0.5</Draw_Shadow_Transparency>
            <Draw_Shadow_ExtraAltitudeLayerNum>-0.5</Draw_Shadow_ExtraAltitudeLayerNum>
          </li>
          <!--替换武器-->
          <li Class="MYDE_AerocraftFramework.CompProperties_ReplaceCurrentWeapon"></li>
          <!--特效生成-->
          <li Class="MYDE_AerocraftFramework.CompProperties_SpawnFleck">
            <!--生成的特效-->
            <FleckDef>MYDE_AF_Fleck_HeatGlow_Intense</FleckDef>
            <!--这个是播放特效的间隔-->
            <Fleck_MakeFleckTickMax>1</Fleck_MakeFleckTickMax>
            <!--这个是播放多少次特效-->
            <Fleck_MakeFleckNum_Origin>1</Fleck_MakeFleckNum_Origin>
            <Fleck_MakeFleckNum_Max>0</Fleck_MakeFleckNum_Max>
            <!--这个是位置调整-->
            <Fleck_Range_ToSetPosition>0</Fleck_Range_ToSetPosition>
            <Fleck_Angle_ToSetPosition>0</Fleck_Angle_ToSetPosition>
            <!--这个是特效贴图旋转角度-->
            <Fleck_Rotation>-180~180</Fleck_Rotation>
            <!--这个是特效飞行方向-->
            <!--<Fleck_Angle>-180~180</Fleck_Angle>-->
            <Fleck_Angle>0</Fleck_Angle>
            <!--这个是特效大小-->
            <Fleck_Scale>1.2</Fleck_Scale>
            <!--这个是特效飞行速度-->
            <Fleck_Speed>0</Fleck_Speed>
          </li>
          <!--原版护盾-->
          <li Class="CompProperties_ProjectileInterceptor">
            <radius>6</radius>
            <interceptGroundProjectiles>true</interceptGroundProjectiles>
            <color>(0.4, 0.4, 0.4)</color>
            <activeSound>Broadshield_Ambience</activeSound>
            <hitPoints>300</hitPoints>
            <hitPointsRestoreInstantlyAfterCharge>true</hitPointsRestoreInstantlyAfterCharge>
            <chargeDurationTicks>1200</chargeDurationTicks>
            <interceptNonHostileProjectiles>true</interceptNonHostileProjectiles>
            <interceptOutgoingProjectiles>false</interceptOutgoingProjectiles>
            <idlePulseSpeed>3</idlePulseSpeed>
            <minIdleAlpha>0.05</minIdleAlpha>
            <disarmedByEmpForTicks>600</disarmedByEmpForTicks>
            <drawWithNoSelection>True</drawWithNoSelection>
          </li>
          <li Class="MYDE_AerocraftFramework.CompProperties_ShowBuildingShieldGizmos"></li>
          <!--生成光源-->
          <li Class="MYDE_AerocraftFramework.CompProperties_SpawnLight">
            <!--这个是默认寻找位置-->
            <SpawnLightDef>MYDE_AF_RotorCraft_AssistiveCraft_Light</SpawnLightDef>
          </li>
          <!--手动发射东西-->
          <li Class="MYDE_AerocraftFramework.CompProperties_ShootSomethingManual">
            <!--发射什么东西-->
            <ShootSomethingDef>Bullet_81mmMortarShell_Firefoam</ShootSomethingDef>
            <!--文字+图标-->
            <ShootSomething_Label>Launch firefoam shell</ShootSomething_Label>
            <ShootSomething_Description>Launch firefoam shell</ShootSomething_Description>
            <ShootSomething_True_IconPath>AerocraftFramework/RotorCraft_AssistiveCraft/Shell_Firefoam</ShootSomething_True_IconPath>
            <ShootSomething_False_IconPath>AerocraftFramework/Nothing/Nothing</ShootSomething_False_IconPath>
            <!--这个是默认寻找位置-->
            <ShootSomething_Range>20</ShootSomething_Range>
            <ShootSomething_ReloadTickMax>600</ShootSomething_ReloadTickMax>
          </li>
        </comps>
      </value>
    </match>
  </Operation>
</Patch>